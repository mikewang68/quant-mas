# 信号生成V1策略文档

## 概述

信号生成V1策略是一个综合分析策略，它通过分析pool数据集中已有的策略结果来生成新的交易信号。该策略不直接分析股票的K线数据，而是基于其他策略的输出结果进行二次分析。

## 功能特性

1. **策略计数**: 统计每只股票满足多少个策略
2. **平均分计算**: 计算所有满足策略的平均得分
3. **信号生成**: 根据平均分生成买卖信号
4. **AI增强分析**: 使用AI技术对各策略的得分和价值进行深度分析

## 信号逻辑

### 平均分计算
- 遍历股票在tech、fund、pub字段中的所有策略结果
- 收集每个策略的score值
- 计算所有score的平均值作为score_calc

### 信号判定规则
- **买入信号**: score_calc > 0.7
- **持有信号**: 0.4 ≤ score_calc ≤ 0.7
- **卖出信号**: score_calc < 0.4

### AI增强分析
- 对所有策略的score和value进行综合分析
- 生成AI评分(score_ai)和AI信号(signal_ai)

## 数据结构

策略分析结果存储在每个股票的`signals.信号生成V1`字段中：

```json
{
  "score": 0.71,
  "value": {
    "count": 3,
    "score_calc": 0.71,
    "signal_calc": "买入",
    "score_ai": 0.7129,
    "signal_ai": "买入"
  }
}
```

## 使用方法

### 1. 策略部署
策略已自动注册到数据库中，无需额外配置。

### 2. 策略执行
策略会由信号生成Agent自动执行，也可以通过以下方式手动执行：

```bash
python test/test_signal_generation_v1_strategy.py
```

### 3. 结果查看
执行后，结果会保存在pool集合的最新记录中，每个股票的`signals.信号生成V1`字段包含分析结果。

## 未来改进

1. **AI模型优化**: 集成更先进的AI模型进行深度分析
2. **权重调整**: 为不同类型的策略分配不同权重
3. **历史回测**: 添加历史回测功能验证策略有效性
4. **动态阈值**: 根据市场环境动态调整信号判定阈值

